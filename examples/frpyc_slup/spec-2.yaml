name: frpycslup
components:
  - name: server
    type: managed
    statefulness: mongo
    template:
      kind: Deployment
      metadata:
        name: server
        labels:
          app: recognizer
      spec:   # micoservices specification
        selector:
          matchLabels:
            app: recognizer
        template:
          metadata:
            labels:
              app: recognizer
          spec:
            containers:
            - name: server
              image: d3srepo/frpyc-slup-rs:latest
              imagePullPolicy: Always
              args: []
              env:
              - name: PYTHONUNBUFFERED
                value: "0"
              ports:
              - containerPort: 8888
                protocol: UDP
    probes:   # probes
    - name: recognize
    requirements:   # timing requirements
    - type: time
      probe: recognize
      probability: 0.99
      time: 30 # Max. 30ms in 99% cases
    - type: throughput
      probe: recognize
      requests: 30
      per: minute
  - name: client
    type: unmanaged
    dependsOn: # This component has a dependency on the recognizer-server:
    - server
dockersecret: # Fill the following fields with the username/password/email of your Docker account (access to d3srepo required)
  username: edgeclouduser
  password: X1v3f@orU#8yXwF9W9SD
  email: khalyeyev@gmail.com
